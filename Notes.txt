Last:
using appcmd to automate add/remove cosignmodule

Adding:
 appcmd install module /name:"Cosign" /image:"CosignModule.dll" /add:"false"
 appcmd add module /name:"Cosign" /app.name:"Default Web Site/"
 
Removing:
 appcmd delete module "Cosign" /app.name:"Default Web Site/"
 appcmd uninstall module "Cosign"

NOTE: for above to work on adding, need to perhaps provide full path of cosignmodule.dll?  It looks like appcmd is looking in the PATH
or maybe in inetsrv (or maybe in inetsrv because that's where appcmd.exe lives0 rather than the current dir.

Making hr = aham->GetAdminSection in TestAppConfigData work!


LAST: 2 - 22 - 2008
DONE! - Adding the Log() code to take an arbitrarily formatted string and print it using outputdebugString.
	- Copy this code from iiscosign filter!
Going to add code to go through the certificate repository and retrieve one with matching certificateCommonName.
Have the module access the cookieDB directory.  Write the files in there.  Read time stamp, etc.
	- Be sure to validate the cookie value before writing into the directory!  (e.g., no slashes, dots, other illegal characters)

Thinking about using built-in http-redirect thingamajob to redirect users to https.


cosign-iago.web=lKvnly8+emStylEjbdF5KUQgL9VY2L0MpoSLjIEIqJLSd9FKnMPYi-K+OzmW7uH7dYVDqfCfw4BLoh+mlgQvqelMa0RCyhRl9KAh0bq5jDfPWNEV3tsTiF-X4ifW; __utmz=7269686.1200088096.8.4.utmccn=(referral)|utmcsr=phatlewt.wedge.net|utmcct=/bbs/viewtopic.php|utmcmd=referral; __utma=7269686.1650316470.1177432100.1195516092.1200088096.8

2 - 25 - 2008
Need to make sure service cookie is comprised of valid characters

2 - 27 - 2008
LAST: building up sspitest.exe to take a certificate and build up an ssl connection.
	- hopefully.... it will go fast... heh.
	
2 - 27 - 2008
LAST: Can we make the assumption that if DecryptMessage returns 0 bytes decrypted, that we only need to
	call DecryptMessage one more time?  If it's called more than twice, it returns invalid token error.
	
2 - 28 - 2008
	Need to detect sspi failures resulting from not having umwebca.pem installed!
	
	DONE: Compiling each *.cpp file separately and placing all #includes into *.cpp files and moving
		#includes out of *.h files.
	
2 - 29 - 2008
	LAST: adding starttls code to connectionlist
		  add CHECK code
		  add graceful disconnecting error stuff
		  add local cookie cache!
	
3 - 4 - 2008
	LAST: CHECk does not send entire, proper cookie!
		  Use service name that is configured, not one included with the cookie?  At least make sure they match maybe?
		  
	
	LAST: Trying to get serverid.asp to work under testapp2.
		  Need to try running it without cosignmodule installed!
		  
3 - 5 - 2008
	LAST: Need to add Mutexes so that socket code does not have resource-sharing issues
		  Need to add cookieDB caching code and create mutex for that, too.
		  Need to make the cookie generator shared so it doesn't have to be reconstructed on each request
		  Need to...
		  
		  Maybe have a "limited" pool of CosignModules and have the CosignModuleFactory hand them out as needed?
		  
		  
		  
STATS:
	How long to talk weblogin server.
	How long to wait for mutex.
	How long to create cookie.
	How long to process an entire request.
	
3 - 7 - 2008
	LAST: 
	
	DONE! NEED TO ADD SUPPORT FOR MULTIFACTOR!
	Need to add support for mtoken suffixes.
	Need to append timevalue/stamp to end of cookie to make sure it is not over 24 hours old.
	Need to add initial/always/never ip address checking.
	Need to add kerberos ticket retrieving and caching.
	Need to add proxy cookie retrieving and caching.
	Need to make sure allowPublicAccess always populates COSIGN_SERVICE
	Need to add mutex to cookieDatabase class.
	Need to add documentation!
	Need to recover gracefully from misconfiguration
	

	DONE! Need to add "secure" cookie flag.
	DONE! Need to add "httponly" cookie flag.
	
		  Move mutex-grabbing code to inside of connectionList and cookiedb classes?
		  Need to add 'global' cookie generator.
		  Need to add stats gathering.
		  Need to add logging.
		  Need to add error reporting to event log.
		  Need to have module return errors when returning a FINISH_PROCESSING_REQUEST.
		  Need to figure out how to do an isapi_rewrite so web servers can always be redirected from http to https
		  Need to have consistent error-reporting and throwing mechanism.
		  Need to add COSIGN_TRACE'ing to many of the CosignLog statements.
		  DONE! Need to get rid of using namespace std.
		  Make a Cosign namespace?
		  Expand environment variables, such as %systemdir%, in the configuration options.
		  If service name does not begin with "cosign-", prepend that shit.
		  Must check cookies for correctness before dumping to file system.
		  	  
	